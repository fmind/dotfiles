---

- hosts: localhost
  connection: local
  become: yes

  tasks:

  - name: Installing virtualbox application (ubuntu)
    apt: pkg="virtualbox" state=latest
    when: ansible_distribution == 'Ubuntu'

  - name: Installing virtualbox repository (fedora)
    copy: src="{{playbook_dir}}/virtualbox.repo" dest="/etc/yum.repos.d/virtualbox.repo" owner='root' group='root' mode='0644'
    when: ansible_distribution == 'Fedora'

  - name: Installing virtualbox application (fedora 26)
    dnf: pkg="VirtualBox" state=latest
    when: ansible_distribution == 'Fedora'
    ignore_errors: yes

  - name: Installing virtualbox application (fedora 27)
    dnf: pkg="VirtualBox-5.2" state=latest
    when: ansible_distribution == 'Fedora'
    ignore_errors: yes
