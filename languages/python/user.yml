---

- hosts: localhost
  become: false

  tasks:

  - name: installing python3 tools
    pip: name="{{item}}" executable="pip3" extra_args="--user" state=latest
    with_items:
      - jedi
      - yapf
      - isort
      - pipenv
      - flake8
      - autoflake

  - name: installing python3 shells
    pip: name="{{item}}" executable="pip3" extra_args="--user" state=latest
    with_items:
      - hy
      - ptpython
      - trypackage

  - name: deploying pip configuration
    file: src="{{playbook_dir}}/pypirc" dest="~/.pypirc" state=link force=yes

  - name: creating try user directory
    file: path="~/.config/try" state=directory

  - name: deploying try configuration
    file: src="{{playbook_dir}}/try.ini" dest="~/.config/try/config.ini" state=link force=yes

  - name: creating yapf user directory
    file: path="~/.config/yapf" state=directory

  - name: deploying yapf configuration
    file: src="{{playbook_dir}}/yapf" dest="~/.config/yapf/style" state=link force=yes

  - name: creating ptpython user directory
    file: path="~/.ptpython" state=directory

  - name: deploying ptpython configuration
    file: src="{{playbook_dir}}/ptpython.py" dest="~/.ptpython/config.py" state=link force=yes
