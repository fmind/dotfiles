---

- hosts: localhost
  become: true

  tasks:

  - name: Adding docker repository (ubuntu)
    apt_repository: repo="deb https://apt.dockerproject.org/repo ubuntu-xenial main" update_cache=yes
    when: ansible_distribution == 'Ubuntu'

  - name: Adding docker certificate (ubuntu)
    apt_key: url="https://apt.dockerproject.org/gpg"
    when: ansible_distribution == 'Ubuntu'

  - name: Installing docker service (ubuntu)
    apt: pkg="docker-engine" state=latest
    when: ansible_distribution == 'Ubuntu'

  - name: Creating docker directory (fedora)
    file: path="/home/docker" state=directory
    when: ansible_distribution == 'Fedora'

  - name: Linking to docker directory (fedora)
    file: src="/home/docker" dest="/var/lib/docker" state=link
    when: ansible_distribution == 'Fedora'

  - name: Installing docker service (fedora)
    dnf: pkg="docker" state=latest
    when: ansible_distribution == 'Fedora'

  - name: Creating docker system group
    group: name="docker" state=present system=yes
