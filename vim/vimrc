" MAIN SETTINGS

"" compatibility
set nocompatible                " disable vi compatibility
set nomodeline                  " security best pratice

"" interface
set so=10                       " activate a margin for vertical scrolling
set title                       " activate vim title on the current xterm
set mouse=a                     " activate mouse selection for every mode
set wildmenu                    " activate a menu for autocompletion
set wildmode=list:longest       "   (menu behaviour)
set nospell                     " deactivate inline spell check
set spelllang=en,fr             "   (default spelling language)
set background=dark             " activate editor theming
colorscheme molokai             "   (set colorscheme)
set t_Co=256                    "   (add more colors)
set t_md=                       " no bold fonts

"" display
set ruler                       " display cursor location
set number 				        " display line numbers (gutter)
set showmode			        " display the current mode
set noshowmatch			        " don't display matching parenthesis
let loaded_matchparen = 1       "   (same with nocompatible set)
set syntax=on                   " display syntaxic coloration
set laststatus=2                " display the status line (always)
set lazyredraw                  " don't display while executing macros (performance)
set splitright                  " put new vertical window on the right of the current buffer
set splitbelow                  " put horizontal window below the current buffer
set cmdheight=2                 " display more space for the command prompt
set shortmess=a                 " use abbreviations for status messages

"" completion
set completeopt-=preview        " disable the preview completion window

"" indentation
set expandtab                   " insert spaces when hitting TABs
set shiftround                  " round indent value to a multiple of 'shiftwidth'
set autoindent                  " align the new line indent with the previous line
set tabstop=4                   " a hard TAB displays as 4 spaces
set shiftwidth=4                " operation >> indents 4 spaces; << unindents 4 spaces
set softtabstop=4               " insert/delete 4 spaces when hitting a TAB/BACKSPACE
set backspace=indent,eol,start  " allow backspacing over everything in insert mode 

"" search
set incsearch			        " show first match as the search proceeds
set nohlsearch                  " deactivate search highlighting
set ignorecase                  " case insensitivity
set smartcase                   "   (only when no upper letter is used)
set gdefault                    " replace all occurences in line by default (/g)

"" wraping
set wrap                        " wrap text when text length > window size
set linebreak                   " don't break line in a middle of a word
set textwidth=0                 " don't use hard wrapping

"" folding
set foldlevel=20                " folding level
set foldmethod=indent           " folding behaviour

"" read/write
set encoding=utf-8              " default encoding
set ffs=unix,dos,mac            " default newline

"" saving/backup
set hidden                      " buffers can exist in background
set nowb                        " no backup before overriding
set autowrite                   " write buffer on focus loss/make
set nobackup                    " no backup files
set noswapfile                  " no .swp files
set history=100                 " history size
set undolevels=100              " undo size

" PLUGINS
"" set the runtime path to include Vundle and initialize
filetype off                    " required by Vundle
set rtp+=~/.vim/bundle/Vundle.vim
call vundle#begin()

"" include plugins
Bundle 'gmarik/vundle'
Bundle 'vim-pandoc/vim-pandoc'
let g:pandoc#modules#disabled = ["folding"]
Bundle 'vim-pandoc/vim-pandoc-syntax'
let g:pandoc#syntax#conceal#use = 0     " prevent text hiding
Bundle 'easymotion/vim-easymotion'
Bundle 'dhruvasagar/vim-table-mode'
let g:table_mode_corner = "|"       " markdown compatiblity for tables
Bundle 'Valloric/YouCompleteMe'
let g:jedi#show_call_signatures = "1"
let g:ycm_check_if_ycm_core_present = 0     " prevent blocking warning on startup
"let g:ycm_filetype_whitelist = { 'cpp': 1, 'c': 1, 'python':1 }
let g:ycm_autoclose_preview_window_after_completion=1
Bundle 'beloglazov/vim-online-thesaurus'''
let g:online_thesaurus_map_keys = 0     " disable default shortcuts
Bundle 'airblade/vim-gitgutter'
Bundle 'flazz/vim-colorschemes'
Bundle 'Raimondi/delimitMate'
Bundle 'tpope/vim-surround'
Bundle 'scrooloose/syntastic'
let g:syntastic_go_checkers=['']    " disable go checkers
let g:syntastic_python_checkers=['frosted', 'pep8', 'python']
set statusline+=%#warningmsg#
set statusline+=%{SyntasticStatuslineFlag()}
set statusline+=%*
let g:syntastic_python_pep8_args = "--ignore=E265,E501,E702,F403"
let g:syntastic_always_populate_loc_list = 1
let g:syntastic_auto_loc_list = 1
let g:syntastic_check_on_open = 0
let g:syntastic_check_on_wq = 0
Bundle 'tomtom/tcomment_vim'
Bundle 'scrooloose/nerdtree'
"Bundle 'honza/vim-snippets'    " don't use default snippets
Bundle 'ivanov/vim-ipython'
Bundle 'bling/vim-airline' 
let g:airline#extensions#tabline#enabled=1
let g:airline_powerline_fonts=1
let g:airline_theme='simple'
Bundle 'majutsushi/tagbar'
Bundle 'SirVer/ultisnips'
let g:UltiSnipsEditSplit="horizontal"
let g:UltiSnipsExpandTrigger="<c-e>"
let g:UltiSnipsJumpForwardTrigger="<c-b>"
let g:UltiSnipsJumpBackwardTrigger="<c-z>"
Bundle 'mattn/emmet-vim'
let g:user_emmet_mode = 'n'
let g:user_emmet_leader_key=','
Bundle 'powerline/fonts'
Bundle 'kien/ctrlp.vim'
let g:ctrlp_map = '<c-p>'
let g:ctrlp_cmd = 'CtrlP'
let g:ctrlp_custom_ignore = {
  \ 'dir':  '\v[\/]\.(git|hg|svn)$',
  \ 'file': '\v\.(exe|so|dll|pyc|jpeg|jpg|gif|png)$',
  \ }
let g:ctrlp_working_path_mode = 'c'
let g:ctrlp_match_window = 'bottom,order:ttb'
let g:ctrlp_user_command = 'ag %s -l --nocolor -g ""'

"" all the of your plugins must be added before the following line
call vundle#end()
filetype plugin indent on

" HOOKS

"" remove unwanted trailing spaces in python file on save
autocmd BufWritePre *.py :%s/\s\+$//e

" automatic spell checking for the following files
autocmd BufNewFile,BufRead *.{txt,tex,md} setlocal spell spelllang=en,fr

" automatic text wrapping on open, read and save
autocmd BufNewFile,BufRead *.{txt,tex,md} setlocal textwidth=80 whichwrap+=h,l,<,>,[,]
"autocmd BufWritePre *.tex :normal gggqG

"" exclusions
set suffixes=.jpg,.png,.jpeg,.gif,.bak,~,.swp,.swo,.o,.pyc
set wildignore+=*.fls,*.pdf,*.bbl,*.aux,*.dvi

" SHORTCUTS

"" change leader characters
let mapleader="\<Space>"
let maplocalleader="\\"
map ; :
vmap ; :
noremap ;; ;

"" break bad Habits
nnoremap j gj
nnoremap k gk
vnoremap j gj
vnoremap k gk
nnoremap Q <NOP>
noremap <Up> <NOP>
noremap <Down> <NOP>
noremap <Left> <NOP>
noremap <Right> <NOP>

"" basic actions
nnoremap <leader>w :w<CR>
nnoremap <leader>x :x<CR>
nnoremap <leader>q :q<CR>
nnoremap <leader>Q :q!<CR>
nnoremap <leader>R :r!<CR>
nnoremap <leader>z za
nnoremap <leader>r :reg
nnoremap <leader>b :buffer 
nnoremap <leader>B :ls<CR>
nnoremap <leader>e :tabedit 
nnoremap <leader>E :set hls!<CR>
nnoremap <leader>C :setlocal spell! spelllang=en,fr<CR>
nnoremap <leader>h :OnlineThesaurusCurrentWord<CR>
nnoremap <leader>? :help 
nnoremap <leader>g gqip
nnoremap <leader>G gggqG

"" hex editor
nnoremap <leader>#x :%!xxd<CR>
nnoremap <leader>#t :%!xxd -r<CR>

"" copy and paste
vmap <Leader>y "+y
vmap <Leader>d "+d
nmap <Leader>p "+p
nmap <Leader>P "+P
vmap <Leader>p "+p
vmap <Leader>P "+P

"" move around windows
map <c-j> <c-w>j
map <c-k> <c-w>k
map <c-l> <c-w>l
map <c-h> <c-w>h
nnoremap H gT
nnoremap L gt
nnoremap <leader>V :vsplit 
nnoremap <leader>H :hsplit 
nnoremap <leader>L :vnew<CR><c-w>h

"" plugins
nnoremap <leader>- :make<CR>
nnoremap <leader>M :Pandoc 
nnoremap <leader>md :Pandoc doc
nnoremap <leader>mo :Pandoc odt
nnoremap <leader>mh :Pandoc html
nnoremap <leader>ml :Pandoc latex
nnoremap <leader>+i :PluginInstall<CR>
nnoremap <leader>+u :PluginUpdate<CR>
nnoremap <leader>+e :tabedit $MYVIMRC<CR>
nnoremap <leader>+l :source $MYVIMRC<CR>
nnoremap <leader>+s :UltiSnipsEdit<CR>
nnoremap <leader>` :NERDTreeToggle<CR>
nnoremap <leader>S :TagbarToggle<CR>
nnoremap <leader>! :SyntasticToggleMode<CR>
nnoremap <leader>d :YcmCompleter GoToDefinitionElseDeclaration<CR>
