---

- hosts: localhost
  connection: local
  become: yes

  tasks:

  - name: Adding ansible repository
    apt_repository: repo="ppa:ansible/ansible" update_cache=yes
    when: ansible_distribution == 'Ubuntu'

  - name: Installing system packages
    apt: pkg="{{item}}" state=latest
    with_items:
      - jq
      - zsh
      - vim
      - git
      - tree
      - htop
      - curl
      - byobu
      - hexedit
      - parallel
      - imagemagick
      - silversearcher-ag
    when: ansible_distribution == 'Ubuntu'

  - name: Changing user shell
    command: chsh -s /usr/bin/zsh "{{ansible_env.USER}}"
    when: ansible_user_shell != "/usr/bin/zsh"
