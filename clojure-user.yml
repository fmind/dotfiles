---

- hosts: localhost
  connection: local

  tasks:

  - name: Creating ~/bin directory
    file: path="~/bin" state=directory

  - name: Creating ~/.lein directory
    file: path="~/.lein" state=directory

  - name: Installing lein executable
    get_url: dest=~/bin/lein mode=0700 url="https://raw.githubusercontent.com/technomancy/leiningen/stable/bin/lein"

  - name: Deploying lein configuration
    file: src="{{ansible_env.PWD}}/clojure/{{item}}" dest="~/.{{item}}" state=link force=yes
    with_items:
    - lein/profiles.clj

