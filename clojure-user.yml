---

- hosts: localhost
  connection: local

  tasks:

  - name: Creating ~/bin directory
    file: path="~/bin" state=directory

  - name: Creating ~/.boot directory
    file: path="~/.boot" state=directory

  - name: Creating ~/.lein directory
    file: path="~/.lein" state=directory

  - name: Installing Boot executable
    get_url: dest=~/bin/boot mode=0700 url="https://github.com/boot-clj/boot-bin/releases/download/latest/boot.sh"

  - name: Installing Leiningen executable
    get_url: dest=~/bin/lein mode=0700 url="https://raw.githubusercontent.com/technomancy/leiningen/stable/bin/lein"

  - name: Deploying Boot configuration
    file: src="{{ansible_env.PWD}}/clojure/{{item}}" dest="~/.{{item}}" state=link force=yes
    with_items:
    - boot/profile.boot
    - boot/boot.properties

  - name: Deploying Leiningen configuration
    file: src="{{ansible_env.PWD}}/clojure/{{item}}" dest="~/.{{item}}" state=link force=yes
    with_items:
    - lein/profiles.clj

