---

- name: package
  package:
    name: zsh
  become: true
  tags: admin

- name: directories
  file:
    state: directory
    name:
      - ~/.zsh.d/
      - ~/.zsh.d/themes
      - ~/.zsh.d/plugins
    mode: 0750
  tags: user

- name: manager
  git:
    repo: https://github.com/robbyrussell/oh-my-zsh.git
    dest: ~/.oh-my-zsh
    depth: 1
  tags: user

- name: prompt
  git:
    repo: https://github.com/denysdovhan/spaceship-prompt
    dest: ~/.zsh.d/themes/spaceship-prompt
    depth: 1
  tags: user

- name: theme
  file:
    src: ~/.zsh.d/themes/spaceship-prompt/spaceship.zsh-theme
    dest: ~/.zsh.d/themes/spaceship.zsh-theme
    state: link
    force: yes
  tags: user

- name: plugins
  git:
    repo: "https://github.com/{{ item }}.git"
    dest: "~/.zsh.d/plugins/{{ item | basename}}"
    depth: 1
  with_items:
    - djui/alias-tips
    - hlissner/zsh-autopair
    - zsh-users/zsh-completions
    - zsh-users/zsh-autosuggestions
    - zsh-users/zsh-syntax-highlighting
  tags: user

- name: environ
  file:
    src: "{{ role_path }}/files/zshenv"
    dest: ~/.zshenv
    state: link
    force: yes
  tags: user

- name: config
  file:
    src: "{{ role_path }}/files/zshrc"
    dest: ~/.zshrc
    state: link
    force: yes
  tags: user
