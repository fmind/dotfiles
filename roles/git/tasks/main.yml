---

- name: package
  package:
    name: git
  become: true
  tags: admin

- name: library
  pip:
    name: PyGithub
    executable: pip3
    extra_args: --user
  tags: user

- name: cleaner
  pip:
    name: git-sweep
    executable: pip3
    extra_args: --user
  tags: user

- name: manager
  get_url:
    url: https://raw.githubusercontent.com/StreakyCobra/gws/master/src/gws
    dest: ~/.local/bin/gws
    mode: 0700
  tags: user

- name: config
  file:
    src: "{{ role_path }}/files/gitconfig"
    dest: ~/.gitconfig
    state: link
    force: no
  ignore_errors: true
  tags: user

- name: ignore
  file:
    src: "{{ role_path }}/files/gitignore"
    dest: ~/.gitignore
    state: link
    force: yes
  tags: user
