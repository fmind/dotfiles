---

- name: package
  ansible.builtin.package:
    name: git
  become: true
  tags: admin

- name: cleaner
  community.general.pipx:
    name: git-sweep
  tags: user

- name: manager
  ansible.builtin.get_url:
    url: https://raw.githubusercontent.com/StreakyCobra/gws/master/src/gws
    dest: ~/.local/bin/gws
    mode: 0700
  tags: user

- name: config
  ansible.builtin.file:
    src: "{{ role_path }}/files/gitconfig"
    dest: ~/.gitconfig
    state: link
    force: no
  ignore_errors: true
  tags: user

- name: ignore
  ansible.builtin.file:
    src: "{{ role_path }}/files/gitignore"
    dest: ~/.gitignore
    state: link
    force: yes
  tags: user
