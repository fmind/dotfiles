---

- name: install package
  package: name='neovim'
  become: true
  tags: admin

- name: create directory
  file: path='{{item}}' state=directory
  with_items:
      - ~/.config/nvim/
      - ~/.local/share/nvim/site/autoload/
  tags: user

- name: install manager
  get_url: url='https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim' dest='~/.local/share/nvim/site/autoload/plug.vim'
  tags: user

- name: install plugin
  pip: name='pynvim' executable='/usr/bin/pip3' extra_args='--user'
  tags: user

- name: deploy config
  file: src='{{role_path}}/files/init.vim' dest='~/.config/nvim/init.vim' state=link force=yes
  tags: user
