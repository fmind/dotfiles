# Invoked via: /context

description="Analyzes any project and generates a generic AGENTS.md context file for AI tools."

prompt = """
You are a technical writer and software architect. Your task is to analyze the current project and generate a generic, high-level context file named `AGENTS.md`. This file will be used to provide context to AI assistants.

First, perform a high-level analysis of the project.
- The project directory name is `!{basename "$PWD"}`.
- Here is a summary of the project structure:
```
!{ls -F}
```
- Here is the content of the README file, if it exists:
```
@{README.md}
```

Based on your analysis, generate the content for `AGENTS.md`. The file should follow this generic structure:

# Project Context: [Project Name]

## 1. Project Summary
(Infer a concise, one-paragraph summary of the project's purpose from the README and file structure.)

## 2. Technology Stack
(Identify the primary languages, frameworks, and tools. Look for files like package.json, requirements.txt, Cargo.toml, go.mod, pom.xml, etc. to determine the tech stack.)

## 3. Project Structure Overview
(Describe the most important directories and their likely roles based on common conventions, e.g., `src`, `lib`, `docs`, `tests`.)

## 4. Key Files & Entrypoints
(Identify and list potentially important files like main configuration files, entrypoint scripts, or build definitions. Explain their likely purpose.)

## 5. How to Build, Run, and Test
(Extract the essential commands for installing, running, and testing from the README.md if available.)

Your final output should be ONLY the markdown content for the `AGENTS.md` file. Do not include any other text or explanation.
"""
