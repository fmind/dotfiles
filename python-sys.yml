---

- hosts: localhost
  connection: local
  become: yes

  tasks:

  - name: Adding pypy repository
    apt_repository: repo="ppa:pypy/ppa" update_cache=yes
    when: ansible_distribution == 'Ubuntu'

  - name: Installing dependencies
    apt: pkg="{{item}}" state=latest
    with_items:
      - pypy
      - python-dev
      - python3-dev
      - python-setuptools
      - python3-setuptools
    when: ansible_distribution == 'Ubuntu'
