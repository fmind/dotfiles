---

- hosts: localhost
  become: false

  tasks:

  - name: installing neovim for python
    pip: name="neovim" executable="pip3" extra_args="--user"

  - name: creating neovim user directory
    file: path="~/.config/nvim/" state=directory

  - name: creating neovim sub directories
    file: path="~/.config/nvim/{{item}}/" state=directory
    with_items:
      - undo
      - swap
      - spell
      - backup
      - session
      - plugged
      - autoload

  - name: deploying neovim configuration
    file: src="{{playbook_dir}}/init.vim" dest="~/.config/nvim/init.vim" state=link force=yes

  - name: deploying neovim snippet files
    file: src="{{playbook_dir}}/snippets" dest="~/.config/nvim/snippets" state=link force=yes

  - name: installing neovim plugin manager
    get_url: url="https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim" dest="~/.config/nvim/autoload/plug.vim" mode=0600
