---

- hosts: localhost
  become: true

  tasks:

  - name: Installing emacs (ubuntu + display)
    apt: pkg="emacs" state=latest
    when: lookup('env', 'DISPLAY') and
          ansible_distribution == 'Ubuntu'

  - name: Installing emacs (ubuntu + console)
    apt: pkg="emacs24-nox" state=latest
    when: not lookup('env', 'DISPLAY') and
          ansible_distribution == 'Ubuntu'

  - name: Installing emacs (fedora + display)
    dnf: pkg="emacs" state=latest
    when: lookup('env', 'DISPLAY') and
          ansible_distribution == 'Fedora'

  - name: Installing emacs (fedora + console)
    dnf: pkg="emacs-nox" state=latest
    when: not lookup('env', 'DISPLAY') and
          ansible_distribution == 'Fedora'
