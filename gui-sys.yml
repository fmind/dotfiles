---

- hosts: localhost
  connection: local
  become: yes

  tasks:

  - name: Adding insync repository
    apt_repository: repo="deb http://apt.insynchq.com/ubuntu xenial non-free contrib" update_cache=yes
    when: ansible_distribution == 'Ubuntu'

  - name: Adding insync certificate
    apt_key: keyserver="keyserver.ubuntu.com" id="ACCAF35C"
    when: ansible_distribution == 'Ubuntu'

  - name: Adding google repository
    apt_repository: repo="deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main" update_cache=yes
    when: ansible_distribution == 'Ubuntu'

  - name: Adding google certificate
    apt_key: url="https://dl-ssl.google.com/linux/linux_signing_key.pub"
    when: ansible_distribution == 'Ubuntu'

  - name: Adding mendeley repository
    apt_repository: repo="deb http://desktop-download.mendeley.com/download/apt stable main" update_cache=yes
    when: ansible_distribution == 'Ubuntu'

  - name: Adding ubuntu partner repository
    apt_repository: repo="deb http://archive.canonical.com/ubuntu xenial partner" update_cache=yes

  - name: Installing dependencies
    apt: pkg="{{item}}" state=latest
    with_items:
      - dvipng # image support for Anki
    when: ansible_distribution == 'Ubuntu'

  - name: Installing system packages
    apt: pkg="{{item}}" state=latest
    with_items:
      - vlc
      - anki
      - gimp
      - xsel
      - guake
      - insync
      - unison
      - gparted
      - keepassx
      - vim-gtk3
      - virtualbox
      - xbacklight
      - fonts-hack-ttf
      - mendeleydesktop
      - gnome-tweak-tool
    when: ansible_distribution == 'Ubuntu'
